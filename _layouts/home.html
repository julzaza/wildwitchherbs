---
layout: default
---

{% if page.header.overlay_color or page.header.overlay_image or page.header.image %}
  {% include page__hero.html %}
{% elsif page.header.video.id and page.header.video.provider %}
  {% include page__hero_video.html %}
{% endif %}

<div id="main" class="archive__wrapper" role="main">
  {% include sidebar.html %}

  <div class="archive">
    {% unless page.header.overlay_color or page.header.overlay_image %}
      <h1 id="page-title" class="page__title"{% if page.locale %} lang="{{ page.locale }}"{% endif %}>
        {{ page.title | default: site.title }}
      </h1>
    {% endunless %}

    <!-- Intro Text from index.md -->
    <div class="page__intro">
      {{ content }}
    </div>

    <!-- Shop Link (optional) -->
    {% if page.shop_link %}
      <div class="shop-link" style="text-align:center; margin:2rem 0;">
        <a href="{{ page.shop_link }}">â†’ VISIT THE SHOP</a>
      </div>
    {% endif %}

    <!-- Pillar Posts Cluster -->
    <div class="cluster-section">
      <h2>Featured Guides & Pillar Posts</h2>
      <div class="entries-grid">
        {% assign pillar_posts = site.posts | where_exp:"post","post.categories contains 'Folklore' or post.categories contains 'Witchcraft'" | sort:"date" | reverse %}
        {% for post in pillar_posts limit:3 %}
          <article class="archive__item">
            {% if post.image %}
              <img class="archive__item-image" src="{{ post.image }}" alt="{{ post.title }}">
            {% else %}
              <img class="archive__item-image" src="/assets/images/placeholder.jpg" alt="{{ post.title }}">
            {% endif %}
            <div class="archive__item-content">
              <h3 class="archive__item-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
              {% if post.excerpt %}
                <p class="archive__item-excerpt">{{ post.excerpt | strip_html | truncate: 160 }}</p>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      </div>
    </div>

    <!-- Supporting Posts Cluster -->
    <div class="cluster-section">
      <h2>Herbalism & Magic in Practice</h2>
      <div class="entries-grid">
        {% assign supporting_posts = site.posts | where_exp:"post","post.categories contains 'Herbs' or post.categories contains 'Folk Remedies'" | sort:"date" | reverse %}
        {% for post in supporting_posts limit:6 %}
          <article class="archive__item">
            {% if post.image %}
              <img class="archive__item-image" src="{{ post.image }}" alt="{{ post.title }}">
            {% else %}
              <img class="archive__item-image" src="/assets/images/placeholder.jpg" alt="{{ post.title }}">
            {% endif %}
            <div class="archive__item-content">
              <h3 class="archive__item-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
              {% if post.excerpt %}
                <p class="archive__item-excerpt">{{ post.excerpt | strip_html | truncate: 120 }}</p>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      </div>
    </div>

    <!-- Other Posts Grid -->
    <div class="cluster-section">
      <h2>More Articles & Stories</h2>
      <div class="entries-grid">
        {% assign other_posts = site.posts | sort:"date" | reverse %}
        {% for post in other_posts offset:9 %}
          <article class="archive__item">
            {% if post.image %}
              <img class="archive__item-image" src="{{ post.image }}" alt="{{ post.title }}">
            {% else %}
              <img class="archive__item-image" src="/assets/images/placeholder.jpg" alt="{{ post.title }}">
            {% endif %}
            <div class="archive__item-content">
              <h3 class="archive__item-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
              {% if post.excerpt %}
                <p class="archive__item-excerpt">{{ post.excerpt | strip_html | truncate: 100 }}</p>
              {% endif %}
            </div>
          </article>
        {% endfor %}
      </div>
    </div>
  </div>
</div>
